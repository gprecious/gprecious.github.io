---
title: "트레이너스 테크 블로그 개설 기념 포스팅"
date: 2024-02-21 18:00:00 +0900
categories: DAILY
---

# 리팩터링 Chapter 6

변수 추출하기
복잡하고 긴 수식이 있을 경우, 하나의 개념으로 묶일 수 있는 부분은 변수를 만들어 옮긴다.

변수 인라인하기
변수 추출하기의 반대개념.
가끔은 추출된 변수를 다시 인라인 하는게 더 가독성이 좋아질 수도 있다.

함수 선언 바꾸기
함수 이름으로 함수의 역할을 알아보기 힘든 경우, 알아보기 쉬운 이름으로 바꾼다.
적당한 이름이 생각나지 않는다면 주석으로 함수의 역할을 설명해보자.

변수 캡슐화하기
getter, setter 에서 property 를 복사해서 넘겨준다.

# 프로젝트 매라

동영상 서비스 탐색 시작

선정 기준

1. 개발 편의성
2. 앱, 웹 등 다양한 플랫폼 지원
3. 다시 보기 기능 제공
4. 비용
5. 스트리밍과 동시에 물품판매 가능
6. 상호작용 (채팅, 리액션 등) 의 다양성

AWS IVS, AGORA, MUX 등 서비스의 특징은 다음과 같다.
영상 퀄리티, 사용시간에 따라 요금이 부과된다.
다시보기 기능 추가된다면 해당 영상을 보관할 스토리지 비용도 추가된다.
본 프로젝트의 목표를 생각해 보았을 때, 유튜브 라이브, 라이브 다시보기를 붙이고
물품 판매를 깔끔하게 구현하는게 더 낫지 않을까?

11:14
라이브 스트리밍 시작 시, 앱 푸쉬, 디스코드, 카카오톡 메세지를 통한 알림 발송이 필요하다.
스트리밍 시작 전, 예고 메세지 발송이 필요할 수도 있다.

완전한 웹뷰, 완전한 flutter 로 구현은 개발, 유지보수 측면에서 효율 적이지 않다.
앱에서 웹페이지를 그대로 쓸 수 있는 부분은 그대로 쓰고
네이티브 모바일 기능이 필요한 부분만 flutter 로 구현하는게 효율적이다.
이를 하이브리드앱이라 칭한다.

14:27
flutter 로 하이브리드 앱 구현 시, recoil persist 와 http only cookie 를 적용 가능한지 체크해야 한다.
가능은 하지만 javascript 전역 변수에 recoil state를 노출시켜야 한다.
flutter 에 내장된 state 또는 데이터 관리 요소를 사용하는 것이 더 나을 것 같다.

20:22
대부분의 스트리밍 SaaS 들은 다음과 같은 요금 체계를 가진다.

스트리밍 시간 당
참여 인원 당
채팅 1000개 당

# Flutter

Widget 은 Object 이다.
Dart 에서는 모든 데이터 형식을 Object 로 취급한다. 이게 Dart 의 핵심개념이다.

위에도 적었지만 const 키워드 붙이면 캐싱하여 다른 코드에서 재사용이 가능하다.
object 는 기본적으로 메모리에 주소로 존재하기 때문에 해당 주소를 적어주기만 하면 재사용이 가능한 것이다.

Alignment object 로 그라디언트의 시작과 끝을 지정하는 것이 가능하다.
자연어로 위치를 지정할 수도 있지만 좌표로도 가능하다.

14:48
custom widget 을 이용해 컴포넌트와 비슷한 개념을 구현할 수 있을 듯 하다.
트레이너스 웹에서는 Box 컴포넌트를 미리 구현 해놓고 이를 재사용 한다.
앱에서는 Box custom widget 을 만들어 비슷한 방식으로 사용이 가능할 듯 하다.

custom widget 을 만드는 것은 결국 나만의 class 를 구현하는 것이다.
구현한 class 로 object 를 인스턴스화 (instantiate) 하는 것이 핵심 개념이다.

20:35
Custom Container 를 만들 때
build 메소드를 override 한다.
build 메소드는 전체 위젯트리에 대한 context 를 인자로 받는다.
그리고 Widget 을 리턴해야 한다.
build 메소드는 UI 가 렌더링 될 때 실행된다.

20:47

```dart
class GradientContainer extends StatelessWidget {
	const GradientContainer({ super.key });
}
```

위 생성자의 의미

1. {} 는 named 파라미터로 전달한다는 의미이다.
2. 부모 class 의 생성자를 호출하고 key 를 인자로 전달한다
3. 원래 코드는 아래와 같다

```dart
const GradientContainer({ key }): super(key: key)
```

파일명은 \_ 포함 소문자로 짓는 것이 국룰

const 키워드는 계층구조를 따라 아래에 위치한 모든 요소에 적용된다.
하지만 const 키워드가 붙은 객체 안에 var 로 선언된 변수가 들어가면 에러가 발생한다.
변수는 언제든 변할 수 있기 때문이다.

웬만하면 var 로 선언해서 type 추론을 사용하자.
하지만 java 처럼 클래스명으로 선언도 가능함을 알고 있자.
클래스명 뒤에 ? 붙임으로 null 도 가능한 변수라는 것을 알릴 수 있다.

```dart
Alignment? startAlignment;
var startAlignment = Alignment.topLeft
```
